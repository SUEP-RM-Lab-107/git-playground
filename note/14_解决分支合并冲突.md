- 使用git进行分支合并的时候，如果两个分支同时修改了同一个文件的同一行代码，合并的时候就会出现conflict,也就是冲突
- git不会自动处理产生冲突的部分，我们需要手动修改文件来解决冲突。
- 本节课我们就来看如何解决冲突，也就是resolve conflict
- 本次我用来演示的是这个hello world项目，我们先来看一下它的现状。这里点击open in vs code,这里我添加了一个文件，叫做colors.txt,这是一个颜色的列表。这里面写了三种颜色，然后我有两个分支，一个是main分支，一个是feature分支，这两个分支写的颜色是一样的。
### 修改了同一部分
- 现在我需要在main分支跟feature分支上各自修改这个颜色的代码，我们来试着改一下。我们先进入feature分支改一下这个代码，这里我加一行叫做yellow,再加一行叫做black. 好，我加了这么两行，然后我提交到feature分支，我切换到main分支，我在main分支上也改两行,black 和pink,
- main分支跟feature分支改了同一个文件的同一行，都是第四行跟第五行，这两个分支合并的时候就会产生冲突。
- 把feature分支往main分支合并可以看到，合并这里它就提示了there will be one conflicted file ->有一个冲突的文件，这里打了一个叹号
- 点击create a merge commit,这里显示我有一个冲突的文件，下面有两个按钮，一个是continue merge.一个是abort merge,abode取消->这次的merge 两个分支各自还原回去。continue按钮，现在不能点
![Pasted image 20260129182601](Pasted%20image%2020260129182601.png)
- 我们需要先手动解决冲突，解决冲突的意思就是我们编辑这个文件，把这个文件修改成我们希望它成为的样子，叫做解决冲突。
- 这里有几种打开方式，我们就点击这个open in vs code,当然也可以使用别的代码编辑软件打开
- 点击open in vs code,这里有一行等号分割成了上下两个部分，上半部分这里写的是head,之前我讲过head本地分支。现在的分支我是写了black跟pink 这两个颜色feature分支是准备合并进来的分支，这里显示的是incoming change,即将合并进来的分支，他的修改内容是black跟yellow,现在我们就开始修改这个文件，把这个文件变成你最终想成为的样子。
- 比如这是一个颜色列表，最终我想保留的所有的颜色，所以这里的black我需要保留一份就可以了，上下两个black 我删掉一个。yellow也保留，最后我再把这些没用的行删掉，首先把小于号这一行删掉，这一行不是代码。把中间的这一行空格删掉，这个也没用，把下面这一行大于号的也删掉，这个也没用，我最终要的文件就是这么一个样子，所以我就最终把它保存成这个样子，点击保存
- 关掉vs code，这里打了一个对勾，表示所有的冲突文件都已经被解决了，然后continue变成了绿色的
- 点击continue,我们回到历史看一下，这里多了一条merge branch feature,表示merge成功
- 最后我们点击push origin,把代码推送上去，推送成功以后，我们的分支就合并进来，冲突也解决完毕了

### 第二种情况，这次问题不是出现在分支合并，而是出现在从远端往本地同步代码这里

- 这种情况经常发生于你跟一个同事合作，同时已经写完代码，并且push到了远端，但是你本地不知道你修改了同一个文件的同一行，那这里我本地也修改一下，本地我也加了这么两行，我从远端拉取一下更新，点击pull origin.这里提示出现冲突，如果我拉取更新的话，会把我本地的代码给覆盖掉
- 解决方案是stash and continue.
![Pasted image 20260129182838](Pasted%20image%2020260129182838.png)
- 点击一下这里，把我的本地修改给stash存储起来了。我们点击这个stash,
![Pasted image 20260129182902](Pasted%20image%2020260129182902.png)
点击restore,把存储还原回来，冲突就出现了。这里打了一个叹号写着conflict
- 我们还是进入文件修改，冲突还是使用刚才的方法，把没用的行删掉，只留你想要的行。
- 这次这四个颜色我都要没用的行，删掉保存一下。这里打一个对勾，表示冲突已经解决了，然后我们填写一个commit message
- 这里我填写解决远端冲突，点击commit to feature push上去，这样我的代码就跟远端进行了同步，并且解决了本地跟远端的冲突。

### 如何使用纯命令行来解决冲突
- 现在处于main分支，我还是把feature分支合并进main分支这里使用
- 点击这个命令git merge feature ，
![Pasted image 20260129183001](Pasted%20image%2020260129183001.png)
显示出现了一个冲突，在color.txt文件
- 我们需要解决一下冲突，这里我们使用纯命令行的方式解决，所以我直接从文件系统里打开这个color.txt. 打开vs code,找到这个文件
- 还是手动处理一下文件，处理好以后，我们需要把刚才处理过的文件添加到暂存区，产生一次提交才算解决完冲突，这里```git add color.txt``` ，把它添加到暂存区,产生一次commit![[Pasted image 20260129183114.png]]
- 这里git commit-m这里的意思是填写一个commit message,那这里我填写resolve color file conflict, 就是解决color这个文件的冲突，我们产生一次这样的commit,
- 这样冲突就被解决完毕了
- 回到desktop看一眼,冲突解决完毕了
- 产生了三个提交，我们把提交推送上去```git push```
![Pasted image 20260129183156](Pasted%20image%2020260129183156.png)
## 两个分支同时改动了同一个文件的文件名字
### 使用desktop
- 这里我处于main分支，我改动一下这个color的文件名，后缀加了一个-m,我们提交上去
- 再切换到feature分支，feature分支也对文件进行了修改，它进行了-f表示这是feature分支的修改，feature分支也把它提交上去
- 这时候我们进行一个操作，把main分支合并进feature分支
- 这里提示了三个文件的冲突![Pasted image 20260129183252](Pasted%20image%2020260129183252.png)不过这一次我不在ui上操作，因为ui操作很迷惑，不太容易懂
- 直接把这个窗口叉掉，这里生成了三个带冲突的文件![Pasted image 20260129183308](Pasted%20image%2020260129183308.png)我们直接右键把这三个文件的更改全部撤销掉![Pasted image 20260129183325.png](Pasted%20image%2020260129183325.png)
- 这三个discard以后，我们打开自己的目录，只需要把这个目录调整成你最终想成为的样子，这里我们经过讨论，觉着还是保留这个-m的文件吧，这里我就把-f的文件删除掉，这个样最终目录想变成的样子
- 点击这里的view conflict,![Pasted image 20260129183408.png](Pasted%20image%2020260129183408.png)这里打上一个对勾代表冲突都解决完成了![Pasted image 20260129183420.png](Pasted%20image%2020260129183420.png)
- 点击continue merge,这里就默认成功了，最后把我们改动提交上去，这里的feature分支就正确修改过来了，文件名称的冲突也解决掉了
### 使用命令行解决文件名称的冲突
- 这里还是刚才那个状态，main分支加了-m后缀，feature分支加了杠f后缀
- 这里我使用命令行进行默认值
- 在项目的右键这里打开open in comment prompt, 打开我的windows命令行![Pasted image 20260129183458.png](Pasted%20image%2020260129183458.png)
- 看一下我现在的分支，![Pasted image 20260129183520.png](Pasted%20image%2020260129183520.png)现在在feature分支，上没有问题
- 我们把main分支merge进来，git merge main ![Pasted image 20260129183545.png](Pasted%20image%2020260129183545.png)这里提示冲突了
- 我们再使用git status看一眼，它提示了我们应该如何操作![Pasted image 20260129183605.png](Pasted%20image%2020260129183605.png)我们看一下这里的红字。这里both deleted就是两个分支都删除了这个文件
- 我们增加了colors_f.txt这个文件
- 他们增加了colors_m.txt这个文件
- 这里我们按照提示操作，首先我们把两个分支删除的文件，使用git remove命令再删除一遍
- 这里git remove把这个大家两个都删除的删除一遍![Pasted image 20260129183741.png](Pasted%20image%2020260129183741.png)下一步我们看到底保留哪个文件，这里我还是要保留这个-m文件
- 我们把colors_f文件删掉，git remove colors_f.txt
- 我们需要保留colors_m.txt文件，git add colors_m.txt
- ![Pasted image 20260129184005.png](Pasted%20image%2020260129184005.png)
- 我们再使用git status看一眼，这里就没有冲突了，变成一个绿色了
- 我们使用git commit命令提交上去，这里还是留一个commit的message -m  ,  -m是message的意思，那这里我还是叫resolve file name conflict 解决文件名的冲突![Pasted image 20260129184117.png](Pasted%20image%2020260129184117.png)
- 提交上去，这样冲突就解决完毕了
- 我们看一下自己的文件，只保留了一个-m文件，最后我们记得把所有的改动发布到远端

### 我们介绍了两种解决文件名冲突的方式，一个是使用desktop,另外一种是使用命令行，这两种方式都可以
